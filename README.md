# üè° AI Realtor ‚Äî –Ü–Ω—Ç–µ–ª–µ–∫—Ç—É–∞–ª—å–Ω–∏–π Telegram‚Äë–∞—Å–∏—Å—Ç–µ–Ω—Ç –Ω–µ—Ä—É—Ö–æ–º–æ—Å—Ç—ñ

AI Realtor –ø–æ—î–¥–Ω—É—î –∑–æ–≤–Ω—ñ—à–Ω—ñ API –Ω–µ—Ä—É—Ö–æ–º–æ—Å—Ç—ñ, Supabase, Google Sheets —Ç–∞ —ñ–Ω—Ç–µ–ª–µ–∫—Ç—É–∞–ª—å–Ω—É –¥—ñ–∞–ª–æ–≥–æ–≤—É –ª–æ–≥—ñ–∫—É –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞—Å–∏—Å—Ç–µ–Ω—Ç–∞, —â–æ –¥–æ–ø–æ–º–∞–≥–∞—î –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É –∑–Ω–∞—Ö–æ–¥–∏—Ç–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ñ –æ–≥–æ–ª–æ—à–µ–Ω–Ω—è, —Ñ—ñ–ª—å—Ç—Ä—É–≤–∞—Ç–∏ —ó—Ö, –∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ª–æ–∫–∞—Ü—ñ—ó —Ç–∞ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –≤ —ñ–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–º—É —Ä–µ–∂–∏–º—ñ.

–ü—Ä–æ—î–∫—Ç –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –º–æ–¥—É–ª—å–Ω—É –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä—É —Ç–∞ –Ω–∞–±—ñ—Ä –∫–ª—ñ—î–Ω—Ç—ñ–≤ –¥–ª—è API, Supabase, Google Sheets —ñ —Å–∏—Å—Ç–µ–º–∏ –¥—ñ–∞–ª–æ–≥—ñ–≤.

---
–û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ:

### üîç –ü–æ—à—É–∫ –Ω–µ—Ä—É—Ö–æ–º–æ—Å—Ç—ñ

* –†–æ–±–æ—Ç–∞ –∑ API –æ–≥–æ–ª–æ—à–µ–Ω—å
* –§–æ—Ä–º—É–≤–∞–Ω–Ω—è HTTP‚Äë–∑–∞–ø–∏—Ç—ñ–≤ —á–µ—Ä–µ–∑ `api_client.py`
* –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ (`filters.py`)
* –ü–∞—Ä—Å–∏–Ω–≥ —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–∏—Ö (`parsers.py`)

### üß† –Ü–Ω—Ç–µ–ª–µ–∫—Ç—É–∞–ª—å–Ω–∏–π –¥—ñ–∞–ª–æ–≥–æ–≤–∏–π –º–æ–¥—É–ª—å

* –û–±—Ä–æ–±–∫–∞ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—Ü—å–∫–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
* –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞ –ª–æ–≥—ñ–∫–∞
* FSM‚Äë—Å—Ç–∞–Ω–∏ (`states.py`)
* –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π —É —Å—Ç–∏–ª—ñ AI‚Äë–∞—Å–∏—Å—Ç–µ–Ω—Ç–∞ (`dialogue.py`)

### üó∫ –†–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è –ª–æ–∫–∞—Ü—ñ–π

* –ü–æ—à—É–∫ —É —Å–ª–æ–≤–Ω–∏–∫—É `location_keywords.json`
* –û–±—Ä–æ–±–∫–∞ –∑–∞–ø–∏—Ç—ñ–≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —â–æ–¥–æ —Ä–∞–π–æ–Ω—ñ–≤ / –º—ñ—Å—Ç (`location_resolver.py`)
* –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ –¥–æ—Å–ª—ñ–¥–∂–µ–Ω–Ω—è –ª–æ–∫–∞—Ü—ñ–π (`inspect_locations.py`)

### üóÑ –ó–æ–≤–Ω—ñ—à–Ω—ñ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó

* **Supabase** ‚Äî –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó (`supabase_client.py`)
* **Google Sheets** ‚Äî —ñ–º–ø–æ—Ä—Ç/–µ–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–∏—Ö (`sheets_client.py`)
* –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –∞–¥–∞–ø—Ç–∏–≤–Ω–æ–≥–æ —Ä–µ–∂–∏–º—É –∑–∞–ø–∏—Ç—ñ–≤ (`LISTINGS_API_MODE`)

### üß™ –†–µ–∂–∏–º Debug

* –¢–µ—Å—Ç–æ–≤—ñ –æ–±–≥–æ—Ä—Ç–∫–∏ –¥–ª—è API (`debug_api.py`, `debug_api_raw.py`)
* –î–µ—Ç–∞–ª—å–Ω—ñ –ª–æ–≥–∏ —Ç–∞ –≤—ñ–¥–ª–∞–¥–∫–∞

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É

```
ai_realtor/
‚îú‚îÄ‚îÄ api_client.py               # –ö–ª—ñ—î–Ω—Ç –¥–ª—è –∑–∞–ø–∏—Ç—ñ–≤ –¥–æ API –Ω–µ—Ä—É—Ö–æ–º–æ—Å—Ç—ñ
‚îú‚îÄ‚îÄ config.py                   # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –∑—á–∏—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
‚îú‚îÄ‚îÄ debug_api.py                # –¢–µ—Å—Ç–æ–≤–∏–π API –∫–ª—ñ—î–Ω—Ç
‚îú‚îÄ‚îÄ debug_api_raw.py            # –°–∏—Ä–∞ –≤–∑–∞—î–º–æ–¥—ñ—è –∑ API
‚îú‚îÄ‚îÄ dialogue.py                 # –ì–æ–ª–æ–≤–Ω–∞ –¥—ñ–∞–ª–æ–≥–æ–≤–∞ –ª–æ–≥—ñ–∫–∞
‚îú‚îÄ‚îÄ filters.py                  # –§—ñ–ª—å—Ç—Ä—É–≤–∞–Ω–Ω—è –æ–≥–æ–ª–æ—à–µ–Ω—å
‚îú‚îÄ‚îÄ inspect_locations.py        # –Ü–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏ –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É –ª–æ–∫–∞—Ü—ñ–π
‚îú‚îÄ‚îÄ location_keywords.json      # –ö–ª—é—á–æ–≤—ñ —Å–ª–æ–≤–∞ –¥–ª—è —Ä–∞–π–æ–Ω—ñ–≤ —ñ –º—ñ—Å—Ü—å
‚îú‚îÄ‚îÄ location_resolver.py        # –†–æ–∑–ø—ñ–∑–Ω–∞–≤–∞—á –ª–æ–∫–∞—Ü—ñ–π
‚îú‚îÄ‚îÄ main.py                     # –¢–æ—á–∫–∞ –∑–∞–ø—É—Å–∫—É —Å–∏—Å—Ç–µ–º–∏
‚îú‚îÄ‚îÄ parsers.py                  # –ü–∞—Ä—Å–µ—Ä–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π API
‚îú‚îÄ‚îÄ requirements.txt            # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
‚îú‚îÄ‚îÄ sheets_client.py            # Google Sheets API –æ–±–≥–æ—Ä—Ç–∫–∞
‚îú‚îÄ‚îÄ states.py                   # FSM‚Äë—Å—Ç–∞–Ω–∏ –¥—ñ–∞–ª–æ–≥—ñ–≤
‚îî‚îÄ‚îÄ supabase_client.py          # Supabase –∫–ª—ñ—î–Ω—Ç
```

---

## ‚öôÔ∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

–ü–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º **–æ–±–æ–≤'—è–∑–∫–æ–≤–æ —Å—Ç–≤–æ—Ä—ñ—Ç—å `.env` —Ñ–∞–π–ª** —É –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ—î–∫—Ç—É —ñ–∑ —Ç–∞–∫–∏–º–∏ –∑–º—ñ–Ω–Ω–∏–º–∏:

```
BOT_TOKEN=BOT_TOKEN
SUPABASE_URL=SUPABASE_URL
SUPABASE_ANON_KEY=SUPABASE_KEY

LISTINGS_API_BASE=API
LISTINGS_API_ENDPOINT=ENDPOINT

LISTINGS_API_KEY=API_KEY

GS_SPREADSHEET_ID=GS_KEY
GS_SERVICE_ACCOUNT_JSON_PATH=PATH_SERVICE_ACCOUNT_JSON

LIMIT_PER_PAGE=3
TEXTS_TTL_SECONDS=900

DEBUG=1
LISTINGS_API_MODE=adaptive
```

---

## üì¶ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

### 1. –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è:

```bash
git clone https://github.com/DmitryMlro/ai_realtor.git
cd ai_realtor
```

### 2. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π:

```bash
pip install -r requirements.txt
```

### 3. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å —â–æ `.env` —Å—Ç–≤–æ—Ä–µ–Ω–∏–π —Ç–∞ –∑–∞–ø–æ–≤–Ω–µ–Ω–∏–π.

### 4. –ó–∞–ø—É—Å–∫:

```bash
python main.py
```

---

## üß© –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ —Ç–∞ –ª–æ–≥—ñ–∫–∞

### üî∏ API —Ä—ñ–≤–µ–Ω—å

`api_client.py`, `debug_api.py`, `debug_api_raw.py` —Ñ–æ—Ä–º—É—é—Ç—å –∑–∞–ø–∏—Ç–∏, –æ–±—Ä–æ–±–ª—è—é—Ç—å –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ —Ç–∞ –∫–µ—Ä—É—é—Ç—å –ø–æ–º–∏–ª–∫–∞–º–∏.

### üî∏ –õ–æ–∫–∞—Ü—ñ—ó

`location_resolver.py` —à—É–∫–∞—î —Å–ø—ñ–≤–ø–∞–¥—ñ–Ω–Ω—è –º—ñ–∂ —Ç–µ–∫—Å—Ç–æ–º –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —Ç–∞ –±–∞–∑–æ—é –∫–ª—é—á–æ–≤–∏—Ö —Å–ª—ñ–≤.

### üî∏ –î—ñ–∞–ª–æ–≥–∏

`dialogue.py` –º—ñ—Å—Ç–∏—Ç—å —É—Å—é –ª–æ–≥—ñ–∫—É –æ–±—Ä–æ–±–∫–∏ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å —Ç–∞ –≤–∏–±–æ—Ä—É –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ.

### üî∏ –°—Ç–∞–Ω–æ–≤–∞ –º–∞—à–∏–Ω–∞

`states.py` –≤–∏–∑–Ω–∞—á–∞—î —Ä—ñ–∑–Ω—ñ —Å—Ç–∞–Ω–∏ –≤–∑–∞—î–º–æ–¥—ñ—ó.

### üî∏ –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—ó

* Supabase ‚Äî –¥–ª—è –ë–î
* Google Sheets ‚Äî –¥–ª—è –ª–æ–≥—É–≤–∞–Ω–Ω—è —á–∏ –µ–∫—Å–ø–æ—Ä—Ç—É

---

## üõ† –ü–ª–∞–Ω–∏ –Ω–∞ –º–∞–π–±—É—Ç–Ω—î

* –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è –ª–æ–≥—ñ–∫–∏ –¥—ñ–∞–ª–æ–≥—É
* –ü–æ–∫—Ä–∞—â–µ–Ω–Ω—è –∞–Ω–∞–ª—ñ–∑—É –ª–æ–∫–∞—Ü—ñ–π
* –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö API –Ω–µ—Ä—É—Ö–æ–º–æ—Å—Ç—ñ
* –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ Telegram Bot API (—è–∫—â–æ –ø–ª–∞–Ω—É—î—Ç—å—Å—è —Ñ—Ä–æ–Ω—Ç)

---

## üßë‚Äçüíª –ê–≤—Ç–æ—Ä

**Dmitry Miroshnichenko**

–ü—Ä–æ—î–∫—Ç —Å—Ç–≤–æ—Ä–µ–Ω–∏–π —è–∫ –º–æ–¥—É–ª—å–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —ñ–Ω—Ç–µ–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ –ø–æ—à—É–∫—É –Ω–µ—Ä—É—Ö–æ–º–æ—Å—Ç—ñ.
